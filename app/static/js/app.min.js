"use strict";var format=function(a,b){return a.replace(/{([^{}]+)}/g,function(a,c){var d=b;return c.split(".").forEach(function(a){d=d[a]}),d})};String.prototype.format=function(a){return format(this,a)};var nomesMeses=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],nomesDias=["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"];Date.prototype.nomeMes=function(){return nomesMeses[this.getMonth()]},Date.prototype.nomeDia=function(){return nomesDias[this.getDay()]},Date.prototype.idadeNascidoEm=function(a){a=[a.splice(0,2),a.splice(2,2),a.splice(4,4)];new Date(parseInt(a.splice(4,4)),parseInt(a.splice(2,2))-1,parseInt(a.splice(0,2)));return nomesDias[this.getDay()]};var urlBackEnd="http://localhost:5000";angular.module("concept2",["ngRoute","ngResource","ngCookies","uiGmapgoogle-maps","ui.mask","concept2.services","concept2.login","concept2.home","concept2.produtos","concept2.noticias","concept2.comunidade","concept2.eventos","concept2.suporte","concept2.contato"]).config(["$sceDelegateProvider","$httpProvider",function(a,b){a.resourceUrlWhitelist(["self","{0}/**".format([urlBackEnd])]),b.defaults.withCredentials=!0}]).run(["$rootScope","Autentic",function(a,b){a.pagina="",a.titulo="",a.$on("$locationChangeSuccess",function(b,c,d){a.referrer=d}),b.atualizaValores(),a.atletaLogado=b.estaLogado()}]),angular.module("concept2.login",["ngRoute"]).config(["$routeProvider",function(a){a.when("/atleta/login",{templateUrl:"{0}/angular/atleta/login.html".format([urlBackEnd]),controller:"LoginController"}).when("/atleta/logout",{templateUrl:"{0}/angular/home.html".format([urlBackEnd]),controller:"LogoutController"}).when("/atleta/perfil",{templateUrl:"{0}/angular/atleta/perfil.html".format([urlBackEnd]),controller:"PerfilController"}).when("/atleta/inscricoes",{templateUrl:"{0}/angular/atleta/inscricoes.html".format([urlBackEnd]),controller:"PerfilController"})}]).controller("LogoutController",["$rootScope","$scope","$window","Login","Autentic",function(a,b,c,d,e){e.limpaValores();var f=new d;f.$delete().then(function(){e.atualizaValores(),a.atletaLogado=!1,a.referrer?c.location=a.referrer:c.location="/"})}]).controller("LoginController",["$rootScope","$scope","$window","Login","Autentic",function(a,b,c,d,e){a.pagina="atleta",a.titulo="Atleta",a.atletaLogado="undefined"!=e.token&&null!=e.token,b.login=new d({email:null,senha:null}),b.campoValido=function(a){return a?a.$touched&&a.$valid:!0},b.campoInvalido=function(a){return a?a.$touched&&a.$invalid:!1},b.loginFalhou=!1,b.enviandoLogin=function(){b.formLogin.$valid&&b.login.$save().then(function(){e.atualizaValores(),a.atletaLogado=e.estaLogado(),a.referrer&&(c.location=a.referrer)},function(){b.loginFalhou=!0})}}]),angular.module("concept2.comunidade",[]).config(["$routeProvider",function(a){a.when("/comunidade",{templateUrl:"{0}/angular/comunidade.html".format([urlBackEnd]),controller:"ComunidadeController"})}]).config(["uiGmapGoogleMapApiProvider",function(a){a.configure({key:"AIzaSyDzcLVVah4PjogAqerQdBcYowwzJcsKjv0",v:"3.20",language:"pt-br",libraries:"places"})}]).controller("ComunidadeController",["$rootScope","$scope","$http","OndeRemar",function(a,b,c,d){a.pagina="comunidade",a.titulo="Comunidade",b.modalidades=[{nome:"Clube de Remo",slug:"clube-remo",ativo:!0},{nome:"CrossFit",slug:"crossfit",ativo:!0},{nome:"Musculação",slug:"musculacao",ativo:!0},{nome:"Aula Coletiva",slug:"aula-coletiva",ativo:!0}],b.map={center:{latitude:-14.235004,longitude:-51.92528},zoom:4};var e=function(){angular.forEach(b.ondeRemar,function(a){a.icone="/static/img/comunidade/mini/{0}.png".format([a.modalidade.codigo]),a.options={title:a.modalidade.nome},a.exibeInfo=!1})};b.ondeRemar=d.query(e);var f={places_changed:function(a){var c=a.getPlaces();return 0==c.length?!1:(c=c[0],b.map.center={latitude:c.geometry.location.lat(),longitude:c.geometry.location.lng()},void(b.map.zoom=14))}};b.searchbox={template:"{0}/angular/comunidade/search-box.html".format([urlBackEnd]),events:f},b.ponto={},b.alternaTipo=function(a){a.ativo=!a.ativo;var c=[];angular.forEach(b.modalidades,function(a){a.ativo&&c.push(a.slug)}),0==c.length?b.ondeRemar=[]:b.ondeRemar=d.query({modalidade:c},e)}}]),angular.module("concept2.contato",["ngRoute"]).config(["$routeProvider",function(a){a.when("/contato",{templateUrl:"{0}/angular/contato.html".format([urlBackEnd]),controller:"ContatoController"})}]).controller("ContatoController",["$rootScope","$scope","$http",function(a,b,c){a.pagina="contato",a.titulo="Contato"}]),angular.module("concept2.eventos",["ngRoute"]).config(["$routeProvider",function(a){a.when("/eventos",{templateUrl:"{0}/angular/eventos.html".format([urlBackEnd]),controller:"EventosController"}).when("/eventos/:slug",{templateUrl:"{0}/angular/evento/evento.html".format([urlBackEnd]),controller:"EventoController"}).when("/eventos/:slug/:itemMenu",{templateUrl:"{0}/angular/evento/evento.html".format([urlBackEnd]),controller:"EventoController"})}]).directive("emailNaoUsado",function(){return{require:"ngModel",link:function(a,b,c,d){d.$validators.emailNaoUsado=function(b,c){return"Email já está cadastrado como atleta."!=a.mensagemErro}}}}).directive("cpfValido",function(){return{require:"ngModel",link:function(a,b,c,d){d.$validators.cpfValido=function(a,b){if(!b)return!1;var c,d,e=b.replace(/\./g,"").replace(/_/g,"").replace(/\-/g,"");if(c=0,"00000000000"==e)return!1;for(var f=1;9>=f;f++)c+=parseInt(e.substring(f-1,f))*(11-f);if(d=10*c%11,10!=d&&11!=d||(d=0),d!=parseInt(e.substring(9,10)))return!1;for(c=0,f=1;10>=f;f++)c+=parseInt(e.substring(f-1,f))*(12-f);return d=10*c%11,10!=d&&11!=d||(d=0),d==parseInt(e.substring(10,11))}}}}).directive("igualSenha",function(){return{require:"ngModel",link:function(a,b,c,d){d.$validators.igualSenha=function(b,c){return a.atleta?a.atleta.senha==c:void 0}}}}).directive("nascimentoCorreto",function(){return{require:"ngModel",link:function(a,b,c,d){d.$validators.nascimentoCorreto=function(a,b){try{var c=b.split("/"),d=parseInt(c[0]);if(d>31)return!1;var e=parseInt(c[1]),f=parseInt(c[2]);if(2==e){if(d>29)return!1;var g=f%4==0&&f%100!=0||f%400==0;if(!g&&d>28)return!1}var h=new Date,i=h.getFullYear(),j=new Date(f,e-1,d),k=new Date(i-100,h.getMonth(),h.getDay()),l=new Date(i-9,h.getMonth(),h.getDay());return j>=k&&l>=j}catch(m){return!1}}}}}).controller("EventosController",["$rootScope","$scope","$http","$sce","Evento",function(a,b,c,d,e){a.pagina="eventos",a.titulo="Eventos",b.eventos=[],b.trataHtml=function(a){return d.trustAsHtml(a)},b.eventos=e.query()}]).controller("EventoController",["$rootScope","$scope","$routeParams","$http","$sce","$filter","$window","$location","Evento","Atleta","Inscricao","Autentic",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){angular.forEach(a,function(a,b){void 0!==a&&void 0!==a.$validate&&(a.$validate(),a.$setDirty())})}b.estaCarregando=!1,b.slug=c.slug,b.itemMenu=c.itemMenu||"sobre",b.template="{0}/angular/evento/{1}.html".format([urlBackEnd,b.itemMenu]),b.urlLojaInscricao="https://concept2.com.br/shop/index.php?route=product/product&product_id=125",b.maskDef={maskDefinitions:{9:/\d/,D:/[0-3]/,d:/[0-9]/,M:/[0-1]/,m:/[0-2]/}},a.pagina="eventos",b.exibeAjudaPedido=function(){$("#ajudaPedido").popover(),$("#ajudaPedido").popover("toggle")},b.itensMenu=[{slug:"sobre",nome:"Sobre"},{slug:"horarios",nome:"Horários"},{slug:"regulamento",nome:"Regulamento"},{slug:"resultados",nome:"Resultados"},{slug:"inscricao",nome:"Inscreva-se"}],b.trataHtml=function(a){return e.trustAsHtml(a)},b.colocacoes=[1,2,3,4,5,6,7,8],b.evento=i.get({id:b.slug},function(){a.titulo=b.evento.titulo;var c=new Date(b.evento.dataInicio.ano,b.evento.dataInicio.mes-1,b.evento.dataInicio.dia),d=new Date(b.evento.dataFim.ano,b.evento.dataFim.mes-1,b.evento.dataFim.dia);if(d.getMonth()==c.getMonth()){var e=c.toLocaleString("pt-br",{month:"long"});d.getDay()==c.getDay()&&(b.evento.duracao="dia {0} de {2}".format([b.evento.dataInicio.dia,e])),b.evento.duracao="de {0} a {1} de {2}".format([b.evento.dataInicio.dia,b.evento.dataFim.dia,e])}var i=parseInt((d-c)/864e5)+c.getDate();b.datas=[];for(var n=c.getDate();i>=n;n++)b.datas.push({data:"{0}/{1}".format([c.getDate(),c.getMonth()+1]),dia:"{0}, {1}{2} de {3}".format([c.nomeDia(),n,1==n?"º":"",c.nomeMes()]),provas:[]}),c.setDate(c.getDate()+1);if(b.provasDropdownList=[],b.provaDaQueryString=null,angular.forEach(b.evento.provas,function(a){angular.forEach(b.datas,function(b){a.dia.replace(/0/g,"")==b.data&&b.provas.push(a)}),a.distancia>0&&(a.selecionada=!1,b.provasDropdownList.push(a));var c=h.search();c.hasOwnProperty("prova")&&a.codigo==c.prova&&(b.provaDaQueryString=a)}),b.provasParaSelecao=angular.copy(b.provasDropdownList),"inscricao"==b.itemMenu){b.mensagemErro="",b.tiposAfiliacoes=[{codigo:"clube",label:"Clube"},{codigo:"academia",label:"Academia"},{codigo:"box-cf",label:"Box de CF"},{codigo:"independente",label:"Independente"}],b.campoProvaTocado=!1,b.carregandoProvas=!1,b.provasTexts={buttonDefaultText:"Selecione a(s) prova(s) que vai participar..."},b.provasSettings={dynamicTitle:!1,showCheckAll:!1,showUncheckAll:!1,scrollable:!0,scrollableHeight:"300px"},b.provasEventos={onItemSelect:function(a){b.atleta.inscricao.provas.push({id:a.id}),b.atleta.provaSelecionada=1,b.campoProvaTocado=!0},onItemDeselect:function(a){b.removeProva(a.id),0==b.atleta.inscricao.provas.length&&(b.atleta.provaSelecionada=null),b.campoProvaTocado=!0}};var o=function(){angular.forEach(b.provasDropdownList,function(a){a.selecionada=!1}),b.atleta.inscricao.provas=[],b.atleta.provaSelecionada=null};b.obterProva=function(a){var c=null;return angular.forEach(b.evento.provas,function(b){return b.id==a.id?(c=b,!1):void 0}),c},b.removeProva=function(a){angular.forEach(b.atleta.inscricao.provas,function(c,d){return c.id==a?(b.atleta.inscricao.provas.splice(d,1),!1):void 0}),angular.forEach(b.provasDropdownList,function(b){return b.id==a?(b.selecionada=!1,!1):void 0}),0==b.atleta.inscricao.provas.length&&(b.atleta.provaSelecionada=null),b.campoProvaTocado=!0,b.provaDaQueryString=null},b.selecionaProvas=function(){angular.forEach(b.provasDropdownList,function(a){a.selecionada=!1,b.provaDaQueryString&&b.provaDaQueryString.id==a.id&&b.provasEventos.onItemSelect(b.provaDaQueryString),angular.forEach(b.atleta.inscricao.provas,function(c){return a.id==c.id?(b.atleta.provaSelecionada=1,b.campoProvaTocado=!0,a.selecionada=!0,!1):void 0})})},b.clicaNaProva=function(a,c){a?b.provasEventos.onItemSelect(c):b.provasEventos.onItemDeselect(c)},b.reset=function(c,d){a.atletaLogado="undefined"!=l.token&&null!=l.token,l.userId?(b.carregandoProvas=!0,b.limpaSelecaoProvas=!1,b.atleta=j.get({id:l.userId,evento_slug:b.slug},function(){b.atleta.inscricao=new k(b.atleta.inscricao)})):(b.atleta=new j({evento:b.evento.id,nome:null,sobrenome:null,sexo:null,senha:null,confirmeSenha:null,nascimento:null,cpf:null,email:null,telefone:null,celular:null,inscricao:new k({nomeTime:null,tipoAfiliacao:null,afiliacao:null,pedidoNumero:null,provas:[]}),provaSelecionada:null}),o(),b.campoProvaTocado=!1,b.selecionaProvas(),c&&(c.$setPristine(),c.$setUntouched()))},b.reset(),b.exibeLabelTipoAfiliacao=function(a){if(!a)return"Escolha...";var c="";return angular.forEach(b.tiposAfiliacoes,function(b){b.codigo==a&&(c=b.label)}),c},b.selecionaTipoAfiliacao=function(a){b.atleta.inscricao.tipoAfiliacao=a.codigo},b.defineSexo=function(a){b.limpaSelecaoProvas=!0,b.atleta.sexo=a},b.$watch("atleta.email",function(a,c){"Email já está cadastrado como atleta."==b.mensagemErro&&a!==c&&(b.mensagemErro="")}),b.$watch("atleta.sexo",function(a,c){a&&(b.provasDropdownList=f("filter")(b.provasParaSelecao,{sexo:a},function(a,b){return a=f("limitTo")(a,2).toUpperCase(),a==b||"AB"==a||"MI"==a}),b.carregandoProvas&&(b.selecionaProvas(),b.carregandoProvas=!1),b.limpaSelecaoProvas&&(o(),b.selecionaProvas(),b.limpaSelecaoProvas=!1))}),b.$watch("atleta.nascimento",function(a,c){a&&(b.provasDropdownList=f("filter")(b.provasParaSelecao,{sexo:a},function(a,b){return a=f("limitTo")(a,2).toUpperCase(),a==b||"AB"==a||"MI"==a}),b.carregandoProvas&&(b.selecionaProvas(),b.carregandoProvas=!1),b.limpaSelecaoProvas&&(o(),b.selecionaProvas(),b.limpaSelecaoProvas=!1))}),b.verificaErro=function(a,b,c){if(!a)return!1;b||(b="required");var d=a.$touched||a.$dirty;return"undefined"!=c&&(d=c||a.$dirty),d&&a.$error[b]},b.campoEstaValido=function(a){var c=!0;"email"==a.$name&&(c=!a.$error.email);var d=a.$touched||a.$dirty;return"provas"==a.$name&&(d=b.campoProvaTocado||a.$dirty),d&&!a.$error.required&&c},b.campoEstaInvalido=function(a){var c=b.verificaErro(a);return"email"==a.$name&&(c|=b.verificaErro(a,"email")||b.verificaErro(a,"emailNaoUsado")),"senha"==a.$name&&(c|=b.verificaErro(a,"minlength")),_.includes(["cpf","celular","nascimento"],a.$name)&&(c|=b.verificaErro(a,"mask")),"nascimento"==a.$name&&(c|=b.verificaErro(a,"nascimentoCorreto")),"cpf"==a.$name&&(c|=b.verificaErro(a,"cpfValido")),"confirmeSenha"==a.$name&&(c|=b.verificaErro(a,"igualSenha")),"provas"==a.$name&&(c=b.verificaErro(a,null,b.campoProvaTocado)),c},b.campoNaoTocado=function(a){return!a.$touched},b.enviandoInscricao=function(c){return c.$invalid?(c.$setPristine(),m(c),!1):(b.estaCarregando=!0,b.processaSucesso=function(){l.atualizaValores(),b.reset(),b.estaCarregando=!1,$("#modalSucesso").modal("show")},b.processaFalha=function(a){b.mensagemErro=a.data.mensagemErro,m(c),b.estaCarregando=!1,$("#modalErro").modal("show")},void(a.atletaLogado?k.update({id:b.atleta.id,inscricao_id:b.atleta.inscricao.id},b.atleta.inscricao).then(function(){b.processaSucesso()},function(a){b.processaFalha(a)}):b.atleta.$save().then(function(){b.processaSucesso()},function(a){b.processaFalha(a)})))},b.redirecionaPagamento=function(a){g.open(b.urlLojaInscricao,"_blank"),a&&$("#modalSucesso").modal("hide")}}}),"horarios"==b.itemMenu&&(b.filtro={ditancia:null,tipo:null,sexo:null,idade:null},b.filtraProvas=function(a,c){"D"==a&&(b.filtro.distancia=c),"T"==a&&(b.filtro.tipo=c),"S"==a&&(b.filtro.sexo=c),"I"==a&&(b.filtro.idade=c),a||(b.filtro={ditancia:null,tipo:null,sexo:null,idade:null}),b.provasDropdownList=angular.copy(b.provasParaSelecao),b.filtro.distancia&&(b.provasDropdownList=f("filter")(b.provasDropdownList,{distancia:b.filtro.distancia})),b.filtro.tipo&&(b.provasDropdownList=f("filter")(b.provasDropdownList,{tipo:b.filtro.tipo})),b.filtro.sexo&&(b.provasDropdownList=f("filter")(b.provasDropdownList,{sexo:b.filtro.sexo})),b.filtro.idade&&(b.provasDropdownList=f("filter")(b.provasDropdownList,{subCategoria:{nome:b.filtro.idade}})),angular.forEach(b.datas,function(a){a.provas=[]}),angular.forEach(b.provasDropdownList,function(a){angular.forEach(b.datas,function(b){a.dia.replace(/0/g,"")==b.data&&b.provas.push(a)})})})}]),angular.module("concept2.home",["ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"{0}/angular/home.html".format([urlBackEnd]),controller:"HomeController"})}]).controller("HomeController",["$rootScope","Autentic",function(a,b){a.pagina="home",a.titulo="Inicial",a.atletaLogado="undefined"!=b.token&&null!=b.token}]),angular.module("concept2.noticias",["ngRoute"]).config(["$routeProvider",function(a){a.when("/noticias",{templateUrl:"{0}/angular/noticias.html".format([urlBackEnd]),controller:"NoticiasController"})}]).controller("NoticiasController",["$rootScope","$scope","$http",function(a,b,c){a.pagina="noticias",a.titulo="Noticias",b.noticias=[],c.get("/json/noticias.json").then(function(a){b.noticias=a.data})}]),angular.module("concept2.produtos",["ngRoute"]).config(["$routeProvider",function(a){a.when("/produtos",{templateUrl:"{0}/angular/produtos.html".format([urlBackEnd]),controller:"ProdutosController"}).when("/produtos/:slug",{templateUrl:"{0}/angular/produtos/produto.html".format([urlBackEnd]),controller:"ProdutoController"}).when("/produtos/:slug/:modeloMenu",{templateUrl:"{0}/angular/produtos/produto.html".format([urlBackEnd]),controller:"ProdutoController"})}]).controller("ProdutosController",["$rootScope","$scope","$http",function(a,b,c){a.pagina="produtos",a.titulo="Produtos"}]).controller("ProdutoController",["$routeParams","$rootScope","$scope","$sce",function(a,b,c,d){c.slug=a.slug,c.modeloMenu=a.modeloMenu||"sobre",c.produtoTemplate="{0}/angular/produtos/{1}/produto.html".format([urlBackEnd,c.slug]),c.subTemplate="{0}/angular/produtos/{1}/{2}.html".format([urlBackEnd,c.slug,c.modeloMenu]),b.pagina="produtos",c.modelosMenu=[{slug:"sobre",nome:"Sobre"},{slug:"caracteristicas",nome:"Características"},{slug:"especificacoes",nome:"Especificações"}],c.trataHtml=function(a){return d.trustAsHtml(a)}}]),angular.module("concept2.services",[]).service("Autentic",["$cookies",function(a){this.token=a.get("XSRF-TOKEN"),this.userId=a.get("USER_ID"),this.atualizaValores=function(){this.token=a.get("XSRF-TOKEN"),this.userId=a.get("USER_ID"),console.log(this.token),console.log(this.userId)},this.estaLogado=function(){return"undefined"!=this.token&&null!=this.token},this.limpaValores=function(){a.remove("XSRF-TOKEN"),a.remove("USER_ID")}}]).factory("OndeRemar",["$resource",function(a){return a("{0}/api/onde-remar/:id".format([urlBackEnd]))}]).factory("Atleta",["$resource",function(a){return a("{0}/api/atletas/:id/:evento_slug".format([urlBackEnd]))}]).factory("Login",["$resource",function(a){return a("{0}/api/login".format([urlBackEnd]))}]).factory("Inscricao",["$resource",function(a){return a("{0}/api/atletas/:id/inscricoes/:inscricao_id".format([urlBackEnd]),null,{update:{method:"PUT"}})}]).factory("Evento",["$resource",function(a){return a("{0}/api/eventos/:id".format([urlBackEnd]))}]),angular.module("concept2.suporte",["ngRoute"]).config(["$routeProvider",function(a){a.when("/suporte",{templateUrl:"{0}/angular/suporte.html".format([urlBackEnd]),controller:"SuporteController"})}]).controller("SuporteController",["$rootScope","$scope","$http",function(a,b,c){a.pagina="suporte",a.titulo="Suporte"}]);